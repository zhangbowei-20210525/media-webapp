<nz-tabset nzAnimated="false">
  <nz-tab [nzTitle]="'基本信息'">
    <nz-skeleton [nzLoading]="isInfoLoading">
      <h3>{{ employee?.name }}</h3>
      <p>{{ employee?.phone }}</p>
      <p>
        <nz-tag *ngFor="let department of employee?.department; let i = index;">
          {{ department.name | truncate:20 }}
        </nz-tag>
        <nz-tag class="editable-tag" (click)="editDepartments()" *aclIf="{ role: ['admin'], ability: [ability.company.employee.department] }">
          <i nz-icon type="edit"></i> 修改部门
        </nz-tag>
      </p>
    </nz-skeleton>
  </nz-tab>
  <nz-tab [nzTitle]="'角色/权限'" *aclIf="{ role: ['admin'], ability: [ability.company.employee.role] }">
    <div class="options-bar">
      <div class="options-wrapper">
        <button nz-button nzSize="small" (click)="setEditable(true)" [disabled]="isEditable">编辑权限</button>
      </div>
      <div class="options-wrapper" [hidden]="!isEditable">
        <button nz-button nzSize="small" nzType="primary" (click)="savePermissions()">保存</button>
        <button nz-button nzSize="small" (click)="setEditable(false)">取消</button>
      </div>
    </div>
    <p>
      <!-- <i nz-icon type="user" style="margin-right: 0.5rem;"></i> -->
      <!-- <nz-dropdown [nzTrigger]="'click'" [nzPlacement]="'bottomCenter'" [nzDisabled]="!isEditable">
        <a nz-dropdown>
          <span *ngIf="selectedRole; else noRole">{{ selectedRole.name }}</span>
          <ng-template #noRole>
            <span class="text-hint">无角色</span>
          </ng-template>
          <span>[切换]</span>
        </a>
        <ul nz-menu nzSelectable>
          <li nz-menu-item *ngFor="let role of roles">
            <a (click)="selectRole(role)">{{ role.name }}</a>
          </li>
        </ul>
      </nz-dropdown> -->
      <nz-checkbox-group [nzDisabled]="!isEditable" [(ngModel)]="roleCheckOptions" (ngModelChange)="onRoleCheckChange($event)"></nz-checkbox-group>
    </p>
    <!-- <p>
      <button nz-button nzSize="small" (click)="setEditable(true)" [disabled]="isEditable">编辑权限</button>
      <span [hidden]="!isEditable" style="margin-left: 1rem;">
        <button nz-button nzSize="small" nzType="primary" (click)="savePermissions()">保存</button>
        <button nz-button nzSize="small" style="margin-left: 1rem;" (click)="setEditable(false)">取消</button>
      </span>
    </p> -->
    <!-- <nz-tree #permissionTree [nzData]="permissionNodes" nzCheckable="true" [nzCheckedKeys]="originCheckedKeys"
      (nzCheckBoxChange)="permissionCheck($event)" nzCheckStrictly="true">
      <ng-template #nzTreeTemplate let-node>
        <span class="custom-node">
          <span>{{ node.title }}</span>
        </span>
      </ng-template>
    </nz-tree> -->
    <nz-tree #permissionTree [nzData]="permissionNodes" nzCheckable="true" (nzCheckBoxChange)="onPermissionsTreeCheckBoxChange($event)">
      <ng-template #nzTreeTemplate let-node>
        <span class="custom-node">
          <span>{{ node.title }}</span>
        </span>
      </ng-template>
    </nz-tree>
  </nz-tab>
  <nz-tab [nzTitle]="'节目权限'" *aclIf="{ role: ['admin'], ability: [ability.company.employee.data] }">
    <app-series-selector [autoSelect]="true" (tagChange)="seriesTagChange($event)"></app-series-selector>
  </nz-tab>
</nz-tabset>